// å¼•å…¥è¾“å…¥è¾“å‡ºçš„åŠŸèƒ½
use std::io;
// ç”Ÿæˆéšæœºæ•°
use rand::Rng;
//
use std::cmp::Ordering;

fn main() {
    // è¾“å‡º
    println!("çŒœæ•°å­—æ¸¸æˆå¼€å§‹");

    // ç”Ÿæˆ 1 - 100 ä¹‹é—´çš„æ•°å­—
    let rand_number = rand::thread_rng().gen_range(1..101);

    // ä½¿ç”¨å¾ªç¯å¤šæ¬¡çŒœæµ‹
    loop {
        println!("è¯·è¾“å…¥ä½ çŒœçš„æ•°å­—:");
        // å˜é‡é»˜è®¤æ˜¯ä¸å¯å˜çš„ï¼Œmut è¡¨ç¤ºå¯å˜
        // ç”Ÿæˆä¸€ä¸ªå¯å˜çš„ç©ºå­—ç¬¦ä¸²
        let mut guess = String::new();

        // read_line è·å–ç”¨æˆ·è¾“å…¥çš„å†…å®¹ï¼Œå…¶ä¸­æŠŠ guess æ”¾å…¥æ„æ€æ˜¯å°†ç”¨æˆ·è¾“å…¥çš„å†…å®¹èµ‹å€¼ç»™ guessï¼ŒåŒæ—¶ read_line å¹¶ä¸ä¼šè¦†ç›–å­—ç¬¦ä¸²ä¸­æœ¬èº«çš„å†…å®¹
        // & è¡¨ç¤ºè¿™ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¼•ç”¨
        io::stdin().read_line(&mut guess).expect("å¤±è´¥");

        // trim æ˜¯å»é™¤å¼€å¤´å’Œç»“å°¾çš„å­—ç¬¦ä¸²
        // parse æ˜¯å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ•°å­—ï¼Œå› ä¸ºå¯ä»¥è½¬æ¢æˆå¤šç§æ•°å­—ç±»å‹ï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨æŒ‡å®šç±»å‹ï¼Œè€Œåœ¨ä¸€å¼€å§‹çš„æ—¶å€™ï¼Œå·²ç»ç»™ guess æŒ‡å®šäº† u32 çš„ç±»å‹ï¼Œæ‰€ä»¥å°±ä¸éœ€è¦å†æŒ‡å®šäº†
        let guess: u32 = match guess.trim().parse() {
            // å¤„ç†è¾“é”™çš„æƒ…å†µï¼Œè¾“å…¥çš„ä¸æ˜¯æ•°å­—çš„æ—¶å€™ï¼Œé‡æ–°è¾“å…¥
            Ok(num) => num,
            Err(_) => continue
        };

        match guess.cmp(&rand_number) {
            Ordering::Less => println!("å¤ªå°äº†"),
            Ordering::Greater => println!("å¤ªå¤§äº†"),
            Ordering::Equal => {
                println!("æ­å–œğŸ‰çŒœå¯¹äº†");
                println!("ç”Ÿæˆçš„æ•°å­—æ˜¯ï¼š{}ï¼Œä½ çŒœçš„æ•°å­—æ˜¯ï¼š{}", rand_number, guess);
                break;
            }
        }
    }
}